{%extends "base.html"%}
{%block content%}
<form id="paymentForm" method="POST">
  <div class="form-group">
    <label for="firstname">firstname</label>
    <input type="text" name="firstname" class="form-control" id="firstname" placeholder="Enter firstname">
    <label for="lastname">lastname</label>
    <input type="text" name="lastname" class="form-control" id="lastname" placeholder="Enter lastname"><br><br>
    <button class="btn btn-primary" type="submit" onclick="openPaymentPopup()">Pay Now</button>
  </div>
</form>

<script>
  function openPaymentPopup() {
    event.preventDefault(); // Prevent form submission
    
    // Retrieve form values
    var firstname = document.getElementById("firstname").value;
    var lastname = document.getElementById("lastname").value;
    
    // Prepare form data
    var form = document.getElementById("paymentForm");
    var formData = new FormData(form);
    
    // Add additional parameters to form data
    formData.append("paybill_number", "888880");
    
    // Open payment popup
    var popupWindow = window.open("", "_blank", "width=600,height=400");
    form.target = "_blank"; // Set form target to the popup window
    form.action = "/paynow"; // Set form action to the payment endpoint
    form.submit(); // Submit the form
  }
  
</script>
{%endblock%}